<!DOCTYPE html>
<html lang="en">

<head>
    <script src="products.js">//<script src> gets products data from products.js -Code from SmartPhoneProducts1_1 products_display.html
    </script>
    <link rel="stylesheet" href="./products-style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Nami's Complete Skateboards</title>
</head>

<body>
    <h1>Complete Skateboards</h1>

    <div>
        <main>
            <form name="quantity_form" action="/products_selection" method="POST"> 
                <script>
                    for (i = 0; i < products.length; i++) {
                        document.write(`
    <section class="item" 
    onclick="this.className='item';">
        <h2>${products[i]["model"]}</h2>
        <p>&dollar;${products[i]["price"]}</p> 
        <img src="./images/${products[i]["image"]}">
       <br>
        Quantity: <input name="quantity_textbox${i}" type="text" maxlength="4" size="4" onkeyup="checkQuantityTextbox(this);">
        <span id="quantity_textbox${i}_msg"></span>
    </section>`);
                    }
                </script>
                </head>
                <body>

                    <br>
                    <input type="submit" name="purchase_submit" value="Purchase">
                    <span id='purchase_button_message'></span>
            </form>
</body>
</html>
</section>
</main>
</div>
</body>

</html>

<script>    // Code from Lab12 order_page.html

    function checkQuantityTextbox(theTextbox) {
        var errs = isNonNegInt(theTextbox.value, true);
        document.getElementById(theTextbox.name+"_msg").innerHTML = errs.join(",");
    }

    function isNonNegInt(q, returnErrors = false) {
        errors = []; // assume no errors at first
        if (Number(q) != q) errors.push('Not a number!'); // Check if string is a number value
        else {
            if (q < 0) errors.push('Negative value!'); // Check if it is non-negative
            if (parseInt(q) != q) errors.push('Not an integer!'); // Check that it is an integer
        }
        return returnErrors ? errors : (errors.length == 0);
    }
</script>